<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <title>Impostazioni Staff | MyFrEM - La migliore piattaforma in Friuli-Venezia Giulia nel caricamento foto inerenti l'emergenza</title>
  <link rel="stylesheet" href="/staff/dashboard/settings/style.css">
  <link rel="shortcut icon" href="https://friuliemergenze.it/assets/logo.png">
  <script type="module" src="/staff/dashboard/settings/staff-settings.js"></script>
  <script type="module" src="/staff/dashboard/settings/2fa-stg.js"></script>
</head>

<body>

  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar">
    <div class="logo">
      <img src="https://friuliemergenze.it/assets/logo.png" alt="Logo MyFrEM">
      <h2>MyFrEM Staff</h2>
    </div>

    <nav>
      <a href="/staff">ğŸ“Š Dashboard</a>
      <a href="/staff/dashboard/photos/">ğŸ–¼ï¸ Moderazione foto</a>
      <a href="/staff/dashboard/users/">ğŸ‘¥ Gestione utenti</a>
      
      <a href="/staff/dashboard/contactrq/">ğŸ“ Richieste di assistenza</a>
      <a href="/staff/dashboard/settings/" class="active">âš™ï¸ Impostazioni</a>
    </nav>

    <button id="logoutBtn" class="logout">ğŸšª Logout</button>
  </aside>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="main-content">

    <h1>âš™ï¸ Impostazioni Staff</h1>

    <!-- ===== PROFILO STAFF ===== -->
    <section class="settings-section">
      <h2>ğŸ‘¤ Profilo Staff</h2>

      <div class="profile-box">
        <div>
          <p><strong>Nome utente:</strong> <span id="staffUsername"></span></p>
          <p>-</p>
          <p><strong>Nome staffer:</strong> <span id="staffName"></span></p>
          <p>-</p>
          <p><strong>Email:</strong> <span id="staffEmail"></span></p>
          <p>-</p>
          <p><strong>Ruolo:</strong> <span id="staffRole"></span></p>
        </div>
      </div>
    </section>

    <!-- ===== CAMBIA PASSWORD ===== -->
    <section class="settings-section">
      <h2>ğŸ” Cambia Password</h2>
      <form id="changePasswordForm">
        <label>Password attuale</label>
        <input type="password" id="currentPassword" required>

        <label>Nuova password</label>
        <input type="password" id="newPassword" required>

        <label>Conferma nuova password</label>
        <input type="password" id="confirmPassword" required>

        <button type="submit">ğŸ’¾ Cambia password</button>
      </form>
      <p id="passwordStatusMsg"></p>
    </section>

    <section class="settings-section">
      <h2>Biografia</h2>
      <p>La tua biografia attuale Ã¨: <span id="bioText"></span></p>
      <textarea id="bioInput" class="textarea"></textarea>
      <button id="saveBioBtn" class="btn" type="submit">ğŸ’¾ Salva bio</button>
    </section>

    <!-- ===== SICUREZZA AVANZATA ===== -->
    <section class="settings-section">
      <h2>ğŸ›¡ï¸ Sicurezza Avanzata</h2>

      <div class="security-item">
        <h3>Autenticazione a due fattori (2FA)</h3>
        <p>Proteggi il tuo account usando il telefono.</p>
        <input type="text" id="phoneNumber" class="disabled" placeholder="+39 3xx xxx xxxx" disabled>
        <button id="sendCodeBtn" class="disabled" disabled>In arrivo</button>
        <button id="sendCodeBtn" style="display:none;">ğŸ“© Invia codice</button>

        <div id="verificationSection" style="display:none; margin-top:10px;">
          <input type="text" id="verificationCode" placeholder="Inserisci codice ricevuto">
          <button id="verifyCodeBtn">âœ… Verifica codice</button>
        </div>

        <p id="twoFaStatusMsg"></p>
      </div>
    </section>

    <!-- ===== PREFERENZE STAFF ===== -->
    <section class="settings-section">
      <h2>âš™ï¸ Preferenze Staff</h2>
      <form id="preferencesForm">
        <label class="checkbox">
          <input type="checkbox" id="emailNotifications"> Notifiche via email
        </label>

        <label class="checkbox">
          <input type="checkbox" id="darkModeToggle"> Tema scuro
        </label>

        <button type="submit">ğŸ’¾ Salva preferenze</button>
      </form>
      <p id="preferencesStatusMsg"></p>
    </section>

    <!-- ===== SISTEMA ===== -->
    <section class="settings-section">
      <h2>ğŸ–¥ï¸ Sistema</h2>

      <button id="clearCacheBtn" class="danger-btn">ğŸ§¹ Svuota cache locale</button>
      <button id="resetLayoutBtn" class="danger-btn">â™»ï¸ Reimposta layout dashboard</button>
    </section>

  </main>

</body>
</html>